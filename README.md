# vrp-types
[Pydantic v2](https://docs.pydantic.dev/) models for [reinterpretcat/vrp](https://github.com/reinterpretcat/vrp), automatically generated by [datamodel-codegen](https://github.com/koxudaxi/datamodel-code-generator/) using json schema generated by [GREsau/schemars](https://github.com/GREsau/schemars).

## Usage Example
```py
from vrp_types import prg, mat, cfg, solve

# fmt: off
matrix = mat.Matrix(
    profile="normal_car",
    travelTimes=[
        0, 609, 981, 906,
        813, 0, 371, 590,
        1055, 514, 0, 439,
        948, 511, 463, 0
    ],
    distances=[
        0, 3840, 5994, 5333,
        4696, 0, 2154, 3226,
        5763, 2674, 0, 2145,
        5112, 2470, 2152, 0,
    ],
)
# fmt: on


# specify termination criteria: max running time in seconds or max amount of refinement generations
config = cfg.Config(
    termination=cfg.TerminationConfig(
        maxTime=5,
        maxGenerations=1000,
    ),
    telemetry=cfg.TelemetryConfig(progress=cfg.ProgressConfig(enabled=True)),
)

# specify test problem
problem = prg.Problem(
    plan=prg.Plan(
        jobs=[
            prg.Job(
                id="delivery_job1",
                deliveries=[
                    prg.JobTask(
                        places=[
                            prg.JobPlace(
                                location=prg.Location(lat=52.52599, lng=13.45413),
                                duration=300,
                                times=[
                                    ["2019-07-04T09:00:00Z", "2019-07-04T18:00:00Z"]
                                ],
                            ),
                        ],
                        demand=[1],
                    )
                ],
            ),
            prg.Job(
                id="pickup_job2",
                pickups=[
                    prg.JobTask(
                        places=[
                            prg.JobPlace(
                                location=prg.Location(lat=52.5225, lng=13.4095),
                                duration=240,
                                times=[
                                    ["2019-07-04T10:00:00Z", "2019-07-04T16:00:00Z"]
                                ],
                            )
                        ],
                        demand=[1],
                    )
                ],
            ),
            prg.Job(
                id="pickup_delivery_job3",
                pickups=[
                    prg.JobTask(
                        places=[
                            prg.JobPlace(
                                location=prg.Location(lat=52.5225, lng=13.4095),
                                duration=300,
                                tag="p1",
                            )
                        ],
                        demand=[1],
                    )
                ],
                deliveries=[
                    prg.JobTask(
                        places=[
                            prg.JobPlace(
                                location=prg.Location(lat=52.5165, lng=13.3808),
                                duration=300,
                                tag="d1",
                            ),
                        ],
                        demand=[1],
                    )
                ],
            ),
        ]
    ),
    fleet=prg.Fleet(
        vehicles=[
            prg.VehicleType(
                typeId="vehicle",
                vehicleIds=["vehicle_1"],
                profile=prg.VehicleProfile(matrix="normal_car"),
                costs=prg.VehicleCosts(fixed=22, distance=0.0002, time=0.005),
                shifts=[
                    prg.VehicleShift(
                        start=prg.ShiftStart(
                            earliest="2019-07-04T09:00:00Z",
                            location=prg.Location(lat=52.5316, lng=13.3884),
                        ),
                        end=prg.ShiftEnd(
                            latest="2019-07-04T18:00:00Z",
                            location=prg.Location(lat=52.5316, lng=13.3884),
                        ),
                    )
                ],
                capacity=[10],
            )
        ],
        profiles=[prg.MatrixProfile(name="normal_car")],
    ),
)

solution = solve(problem=problem, matrix=[matrix], config=config)
print(solution.model_dump_json(indent=4))
```

<details>
<summary>Click to see the output...</summary>

```json
{
    "extras": null,
    "statistic": {
        "cost": 46.2612,
        "distance": 17006,
        "duration": 4172,
        "times": {
            "break_": 0,
            "commuting": 0,
            "driving": 3032,
            "parking": 0,
            "serving": 1140,
            "waiting": 0
        }
    },
    "tours": [
        {
            "shiftIndex": 0,
            "statistic": {
                "cost": 46.2612,
                "distance": 17006,
                "duration": 4172,
                "times": {
                    "break_": 0,
                    "commuting": 0,
                    "driving": 3032,
                    "parking": 0,
                    "serving": 1140,
                    "waiting": 0
                }
            },
            "stops": [
                {
                    "activities": [
                        {
                            "commute": null,
                            "jobId": "departure",
                            "jobTag": null,
                            "location": null,
                            "time": null,
                            "type": "departure"
                        }
                    ],
                    "distance": 0,
                    "load": [
                        1
                    ],
                    "location": {
                        "lat": 52.5316,
                        "lng": 13.3884
                    },
                    "parking": null,
                    "time": {
                        "arrival": "2019-07-04T09:00:00Z",
                        "departure": "2019-07-04T09:04:18Z"
                    }
                },
                {
                    "activities": [
                        {
                            "commute": null,
                            "jobId": "delivery_job1",
                            "jobTag": null,
                            "location": null,
                            "time": null,
                            "type": "delivery"
                        }
                    ],
                    "distance": 5112,
                    "load": [
                        0
                    ],
                    "location": {
                        "lat": 52.52599,
                        "lng": 13.45413
                    },
                    "parking": null,
                    "time": {
                        "arrival": "2019-07-04T09:20:06Z",
                        "departure": "2019-07-04T09:25:06Z"
                    }
                },
                {
                    "activities": [
                        {
                            "commute": null,
                            "jobId": "pickup_delivery_job3",
                            "jobTag": "p1",
                            "location": null,
                            "time": null,
                            "type": "pickup"
                        }
                    ],
                    "distance": 8952,
                    "load": [
                        1
                    ],
                    "location": {
                        "lat": 52.5225,
                        "lng": 13.4095
                    },
                    "parking": null,
                    "time": {
                        "arrival": "2019-07-04T09:35:15Z",
                        "departure": "2019-07-04T09:40:15Z"
                    }
                },
                {
                    "activities": [
                        {
                            "commute": null,
                            "jobId": "pickup_delivery_job3",
                            "jobTag": "d1",
                            "location": null,
                            "time": null,
                            "type": "delivery"
                        }
                    ],
                    "distance": 11106,
                    "load": [
                        0
                    ],
                    "location": {
                        "lat": 52.5165,
                        "lng": 13.3808
                    },
                    "parking": null,
                    "time": {
                        "arrival": "2019-07-04T09:46:26Z",
                        "departure": "2019-07-04T09:51:26Z"
                    }
                },
                {
                    "activities": [
                        {
                            "commute": null,
                            "jobId": "pickup_job2",
                            "jobTag": null,
                            "location": null,
                            "time": null,
                            "type": "pickup"
                        }
                    ],
                    "distance": 13780,
                    "load": [
                        1
                    ],
                    "location": {
                        "lat": 52.5225,
                        "lng": 13.4095
                    },
                    "parking": null,
                    "time": {
                        "arrival": "2019-07-04T10:00:00Z",
                        "departure": "2019-07-04T10:04:00Z"
                    }
                },
                {
                    "activities": [
                        {
                            "commute": null,
                            "jobId": "arrival",
                            "jobTag": null,
                            "location": null,
                            "time": null,
                            "type": "arrival"
                        }
                    ],
                    "distance": 17006,
                    "load": [
                        0
                    ],
                    "location": {
                        "lat": 52.5316,
                        "lng": 13.3884
                    },
                    "parking": null,
                    "time": {
                        "arrival": "2019-07-04T10:13:50Z",
                        "departure": "2019-07-04T10:13:50Z"
                    }
                }
            ],
            "typeId": "vehicle",
            "vehicleId": "vehicle_1"
        }
    ],
    "unassigned": null,
    "violations": null
}
```

</details>

